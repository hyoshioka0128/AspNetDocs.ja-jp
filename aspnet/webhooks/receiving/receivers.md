---
uid: webhooks/receiving/receivers
title: ASP.NET Webhook レシーバー |Microsoft Docs
author: rick-anderson
description: ASP.NET Webhook レシーバー
ms.author: riande
ms.date: 01/17/2012
ms.assetid: 6cdea089-15b2-4732-8c68-921ca561a8f1
ms.openlocfilehash: d771a588b23abcd7b1b33e694af17b219683fc48
ms.sourcegitcommit: 24b1f6decbb17bb22a45166e5fdb0845c65af498
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/01/2019
ms.locfileid: "57038979"
---
# <a name="aspnet-webhooks-receivers"></a>ASP.NET Webhook レシーバー

Webhook を受信は、送信者に依存します。 サブスクライバーが実際にリッスンしていることを確認する WebHook を登録する追加の手順がある場合があります。 いくつかの Webhook では、HTTP POST 要求には個別に取得するが、イベント情報への参照が含まれてのみプッシュ/プル モデルを提供します。 多くの場合、セキュリティ モデルが大幅に異なります。

Microsoft ASP.NET Webhook の目的は、単純なより一貫性のある多くの Webhook の特定のバリエーションを処理する方法を見極める時間をかけることがなく、API を構成するようにすることです。

WebHook レシーバーは、受け入れ、特定の差出人からの Webhook の検証を担当します。 WebHook レシーバーは、任意の数の Webhook は、それぞれに独自の構成をサポートできます。 たとえば、GitHub の WebHook レシーバーは、任意の数の GitHub リポジトリからの Webhook を使用できます。

## <a name="webhook-receiver-uris"></a>WebHook レシーバーの Uri

Microsoft ASP.NET Webhook をインストールすることで拡張可能なさまざまなサービスからの WebHook 要求を受け取る一般的な WebHook コント ローラーを取得します。 要求が到着すると、特定の WebHook 送信者を処理するためにインストールされている適切な受信者を取得します。

このコント ローラーの URI は、サービスに登録する、WebHook URI し、の形式は。

```
https://<host>/api/webhooks/incoming/<receiver>/{id}
```

セキュリティ上の理由から、多くの WebHook レシーバーことが要求 URI、 *https* URI によっても含める必要があります、意図したパーティは上記の URI に Webhook を送信することができますのみを適用するために使用する追加のクエリ パラメーターと.

`<receiver>`コンポーネントは、受信者の名前、たとえば`github`または`slack`します。

*{Id}* 特定の WebHook レシーバー構成を識別するために使用できる省略可能な識別子です。 特定の受信側に n 個の Webhook を登録するために使用できます。 たとえば、次の 3 つの独立した Webhook を登録する次の 3 つの Uri を使用できます。

```
https://<host>/api/webhooks/incoming/github
https://<host>/api/webhooks/incoming/github/12345
https://<host>/api/webhooks/incoming/github/54321
```

## <a name="installing-a-webhook-receiver"></a>WebHook レシーバーをインストールします。

Microsoft ASP.NET Webhook を使用して Webhook を受信するには、最初の WebHook プロバイダーまたはプロバイダーからの Webhook を受信するための Nuget パッケージをインストールします。 Nuget パッケージの名前は[Microsoft.AspNet.WebHooks.Receivers.*](https://www.nuget.org/packages?q=Microsoft.AspNet.WebHooks.Receivers)最後の部分が、サービスがサポートされていることを示します。 次に例を示します。

[Microsoft.AspNet.WebHooks.Receivers.GitHub](https://www.nuget.org/packages?q=Microsoft.AspNet.WebHooks.Receivers.GitHub) provides support for receiving WebHooks from GitHub and [Microsoft.AspNet.WebHooks.Receivers.Custom](https://www.nuget.org/packages?q=Microsoft.AspNet.WebHooks.Receivers.Custom) provides support for receiving WebHooks generated by ASP.NET WebHooks.

すぐには、Dropbox、GitHub、MailChimp、PayPal、Pusher、Salesforce、Slack、ストライプ、Trello、および WordPress のサポートを見つけることができますが、他のプロバイダーの任意の数をサポートするために得ます。

## <a name="configuring-a-webhook-receiver"></a>WebHook レシーバーを構成します。

を介して WebHook レシーバーが構成されている、 [IWebHookReceiverConfig](https://github.com/aspnet/WebHooks/blob/master/src/Microsoft.AspNet.WebHooks.Receivers/WebHooks/IWebHookReceiverConfig.cs)任意の依存関係の挿入のモデルを使用して、インターフェイスとそのインターフェイスの特定の実装を登録できます。 既定の実装は、Web.config ファイルで設定できますか、または、Azure Web Apps を使用する場合は、使用して設定できるアプリケーションの設定を使用して、 [Azure Portal](https://portal.azure.com/)します。

![Azure アプリの設定](_static/AzureAppSettings.png)

アプリケーション設定キーの形式は次のとおりです。

```
MS_WebHookReceiverSecret_<receiver>
```

値が一致する値のコンマ区切りの一覧、 *{id}* を Webhook 登録されているなどの値。

```
MS_WebHookReceiverSecret_GitHub = <secret1>, 12345=<secret2>, 54321=<secret3>
```

## <a name="initializing-a-webhook-receiver"></a>WebHook レシーバーの初期化

登録することにより、通常の WebHook レシーバーが初期化されます、 *WebApiConfig*などの静的クラスします。

```csharp
namespace WebHookReceivers
{
    public static class WebApiConfig
    {
        public static void Register(HttpConfiguration config)
        {
            // Web API configuration and services

            // Web API routes
            config.MapHttpAttributeRoutes();

            config.Routes.MapHttpRoute(
                name: "DefaultApi",
                routeTemplate: "api/{controller}/{id}",
                defaults: new { id = RouteParameter.Optional }
            );

            // Load receivers
            config.InitializeReceiveGitHubWebHooks();
        }
    }
}
```
