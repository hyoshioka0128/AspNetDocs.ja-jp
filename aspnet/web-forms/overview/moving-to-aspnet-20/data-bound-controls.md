---
uid: web-forms/overview/moving-to-aspnet-20/data-bound-controls
title: データ バインド コントロール |Microsoft Docs
author: microsoft
description: ほとんどの ASP.NET アプリケーションでは、ある程度のバックエンド データ ソースからデータを表示を使用します。 データ バインド コントロールには、相互作用する w のきわめて重要な部分をされている.
ms.author: riande
ms.date: 02/20/2005
ms.assetid: 0e23ff32-646d-43f3-8bec-6b2313d3abd6
msc.legacyurl: /web-forms/overview/moving-to-aspnet-20/data-bound-controls
msc.type: authoredcontent
ms.openlocfilehash: 016dfa2a5a5fb9aaed0e1c60194e53ac9ccb8b36
ms.sourcegitcommit: 0f1119340e4464720cfd16d0ff15764746ea1fea
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/09/2019
ms.locfileid: "59419588"
---
# <a name="data-bound-controls"></a>データ バインドされたコントロール

によって[Microsoft](https://github.com/microsoft)

> ほとんどの ASP.NET アプリケーションでは、ある程度のバックエンド データ ソースからデータを表示を使用します。 データ バインド コントロールには、動的な Web アプリケーション内のデータとの対話のきわめて重要な部分をされています。 ASP.NET 2.0 には、新しい BaseDataBoundControl クラスおよび宣言型構文を含む、データ バインド コントロールにいくつかの大幅な機能強化が導入されています。


ほとんどの ASP.NET アプリケーションでは、ある程度のバックエンド データ ソースからデータを表示を使用します。 データ バインド コントロールには、動的な Web アプリケーション内のデータとの対話のきわめて重要な部分をされています。 ASP.NET 2.0 には、新しい BaseDataBoundControl クラスおよび宣言型構文を含む、データ バインド コントロールにいくつかの大幅な機能強化が導入されています。

BaseDataBoundControl は DataBoundControl クラスと HierarchicalDataBoundControl クラスの基本クラスとして機能します。 このモジュールでは、DataBoundControl から派生する次のクラスについて説明します。

- AdRotator
- リスト コントロール
- GridView
- FormView
- DetailsView

HierarchicalDataBoundControl クラスから派生する次のクラスについても説明します。

- TreeView
- メニュー
- SiteMapPath

## <a name="databoundcontrol-class"></a>DataBoundControl クラス

DataBoundControl クラスは表形式の対話に使用される (VB で mustinherit としてマークされている) 抽象クラスまたは一覧形式のデータ。 次のコントロールは、DataBoundControl から派生したコントロールの一部を示します。

## <a name="adrotator"></a>AdRotator

AdRotator コントロールを使用すると、特定の URL にリンクされている Web ページにグラフィック バナーを表示できます。 コントロールのプロパティを使用して、表示されるグラフィックを回転します。 使用してページに表示する広告の特定の頻度を構成することができます、**インプレッション**キーワード フィルタ リングを使用して、プロパティ、広告をフィルターできます。

AdRotator コントロールは、XML ファイルまたはテーブルをデータのデータベースで使用します。 AdRotator コントロールを構成するには、XML ファイルに次の属性を使用します。

### <a name="imageurl"></a>ImageUrl
広告の表示するイメージの URL。

### <a name="navigateurl"></a>NavigateUrl
ユーザーは、広告がクリックされたときに実行すべき URL です。 URL エンコードがあります。

### <a name="alternatetext"></a>AlternateText
ツールヒントに表示され、スクリーン リーダーによって読み取られた代替テキスト。 ImageUrl で指定されるイメージが利用できない場合にも表示されます。

### <a name="keyword"></a>キーワード
キーワード フィルタ リングを使用する場合に使用できるキーワードを定義します。 指定すると、キーワード フィルターに一致するキーワードを使用して広告だけが表示されます。

### <a name="impressions"></a>インプレッション数
特定の ad が現れる可能性がありますがどのくらいの頻度を決定する重みの数。 同じファイル内の他の広告のインプレッションを基準になります。 XML ファイル内のすべての広告の集団インプレッション数の最大値は 2,048,000,000 1 です。

### <a name="height"></a>高さ
ピクセル単位での ad の高さ。

### <a name="width"></a>幅
ピクセル単位での ad の幅。


> [!NOTE]
> 高さと幅の属性は、高さと幅 AdRotator コントロール自体をオーバーライドします。


一般的な XML ファイルは、次のようになります。

[!code-xml[Main](data-bound-controls/samples/sample1.xml)]

上記の例では、Contoso の ad はインプレッション属性の値のために、ASP.NET Web サイトの広告として表示する可能性の高い 2 回です。

上記の XML ファイルから広告を表示するページに AdRotator コントロールを追加し、設定、 **AdvertisementFile**プロパティを次に示すように、XML ファイルをポイントします。

[!code-aspx[Main](data-bound-controls/samples/sample2.aspx)]

AdRotator コントロールのデータ ソースとしてデータベース テーブルを使用する場合は、次のスキーマを使用してデータベースを設定する必要があります。

| **列名** | **データ型** | **説明** |
| --- | --- | --- |
| ID | int | 主キー。 この列には、任意の名前を持つことができます。 |
| ImageUrl | nvarchar(*length*) | 相対パスまたは絶対 URL、イメージの広告を表示します。 |
| NavigateUrl | nvarchar(*length*) | 広告のターゲット URL。 値を指定しない場合、ad はこのハイパーリンクではありません。 |
| AlternateText | nvarchar(*length*) | イメージが見つからない場合に表示されるテキスト。 一部のブラウザーで、テキストがツールヒントとして表示されます。 代替テキストは、ユーザーが、グラフィックの説明を読み上げるに聞こえるようににもユーザー補助機能の使用されます。 |
| キーワード | nvarchar(*length*) | ページのフィルター処理できます広告のカテゴリ。 |
| インプレッション数 | int(4) | 広告を表示する頻度が発生する可能性を示す数値。 大きな数値より多くの場合、広告が表示されます。 XML ファイル内のすべての印象値の合計は 2,048,000,000 1 を超えないことがあります。 |
| 幅 | int(4) | ピクセル単位でイメージの幅。 |
| 高さ | int(4) | ピクセル単位でイメージの高さ。 |

既にある別のスキーマを持つデータベースの場合、使用することができます、 **AlternateTextField**、 **ImageUrlField**、および**NavigateUrlField**プロパティにマップする、既存のデータベースに AdRotator 属性。 AdRotator コントロールで、データベースからデータを表示するページにデータ ソース コントロールを追加、データベースを指すデータ ソース コントロールの接続文字列を設定し、AdRotator コントロールの設定**DataSourceID**プロパティをデータ ソース コントロールの ID。 AdRotator 広告をプログラムで構成する必要がある場合、AdCreated イベントを使用します。 AdCreated イベントは、2 つのパラメーターを受け取る1 つのオブジェクトと他 AdCreatedEventArgs のインスタンス。 AdCreatedEventArgs は、作成される ad への参照です。

次のコード スニペット、ImageUrl、NavigateUrl、および AlternateText 広告をプログラムによって設定します。

[!code-csharp[Main](data-bound-controls/samples/sample3.cs)]

## <a name="list-controls"></a>リスト コントロール

リスト コントロールには、ListBox、DropDownList、CheckBoxList、RadioButtonList、BulletedList が含まれます。 データ ソースにバインドされたデータをこれらの各コントロールできます。 1 つのフィールドをデータ ソースの表示テキストとして使用され、必要に応じて 2 番目のフィールドを項目の値として使用できます。 項目がデザイン時に、静的に追加することもでき、静的項目およびデータ ソースから追加する動的な項目を混在させることができます。

データ リスト コントロールのバインドをページにデータ ソース コントロールを追加します。 データ ソース コントロールの SELECT コマンドを指定し、データ ソース コントロールの ID に、リスト コントロールの DataSourceID プロパティを設定します。 使用して、 **DataTextField**と**DataValueField**表示テキストとコントロールの値を定義するプロパティ。 また、使用することができます、 **DataTextFormatString**プロパティを次のように表示されるテキストの外観を制御します。

| **正規表現** | **説明** |
| --- | --- |
| 価格: {0:C} | /10 進数の数値データです。 リテラルが表示されます"Price:"に続けて通貨書式の数字です。 通貨書式のカルチャ属性で指定されたカルチャ設定によって異なります、**ページ**ディレクティブまたは Web.config ファイル。 |
| {0:D4} | 整数データです。 10 進数では使用できません。 整数は、次の 4 つの文字幅をゼロで埋めますフィールドに表示されます。 |
| {0:N2}% | 数値データです。 2 桁の数字を表示します。 有効桁数が、リテラル"%"を続けています。 |
| {0:000.0} | /10 進数の数値データです。 数値は小数点以下 1 に丸められます。 3 桁に満たない場合はゼロで埋めます。 |
| {0:D} | 日付/時刻データ。 長い日付形式 (「Thursday、August 06, 1996」) を表示します。 使用される日付の形式は、ページまたは Web.config ファイルのカルチャ設定によって決まります。 |
| {0:d} | 日付/時刻データ。 短い形式の日付を表示します (「12/31/99」) を書式設定します。 |
| {0:yy-MM-dd} | 日付/時刻データ。 数値の年-月-日形式 (96-08-06) で日付を表示します。 |

## <a name="gridview"></a>GridView

GridView コントロールを使用して、表形式のデータを表示および宣言型のアプローチを使用して編集可能、DataGrid コントロールの後継です。 次の機能は、GridView コントロールで使用できます。

- SqlDataSource などのソース コントロールのデータにバインドします。
- 組み込みの並べ替え機能します。
- 組み込みの更新と機能を削除しています。
- 組み込みのページング機能。
- 組み込みの行の選択機能。
- プロパティを動的に設定する GridView オブジェクト モデルへのプログラムによるアクセスは、イベントを処理したり、具合です。
- 複数のキー フィールド。
- ハイパーリンク列の複数のデータ フィールド。
- 外観のカスタマイズ テーマとスタイルを使用します。

**列のフィールド**

GridView コントロール内の各列は DataControlField オブジェクトによって表されます。 既定では、AutoGenerateColumns プロパティに設定が**true**、データ ソースの各フィールドの AutoGeneratedField オブジェクトを作成します。 各フィールドは、データ ソース内の各フィールドが表示される順序で GridView コントロール内の列としてレンダリングされます。 フィールドに表示する列を制御することができますも手動で、 **GridView**コントロールを設定して、 **AutoGenerateColumns**プロパティを**false**と独自し定義列フィールドのコレクション。 別の列フィールドの種類は、コントロール内の列の動作を決定します。

次の表では、使用できる別の列フィールドの種類を示します。

| **列フィールドの種類** | **説明** |
| --- | --- |
| BoundField | データ ソース内のフィールドの値を表示します。 これは、GridView コントロールの既定の列の型です。 |
| ButtonField | GridView コントロールでは、各項目のコマンド ボタンを表示します。 これにより、追加または削除 ボタンなどのカスタム ボタン コントロールの列を作成することができます。 |
| CheckBoxField | GridView コントロールでは、各項目のチェック ボックスを表示します。 この列のフィールド型は一般的ブール値を持つフィールドを表示するために使用します。 |
| CommandField | 定義済みを選択すると、編集、または削除の各操作を実行するコマンド ボタンを表示します。 |
| HyperLinkField | データ ソース内のフィールドの値をハイパーリンクとして表示します。 この列のフィールド型では、2 番目のフィールドをハイパーリンクの URL にバインドできます。 |
| ImageField | GridView コントロールでは、各項目のイメージを表示します。 |
| TemplateField | ユーザー定義コンテンツの指定したテンプレートに応じて GridView コントロール内の各項目が表示されます。 この列のフィールド型列のカスタム フィールドを作成することができます。 |

列のフィールド コレクションを宣言で定義するには、まず追加の開閉**&lt;列&gt;** タグと終了タグの GridView コントロールの間。 開始タグと終了の間に挿入する列フィールドの一覧を次に、 **&lt;列&gt;** タグ。 指定された列は、表示されている順序で列コレクションに追加されます。 **列**コレクションを格納すべて列がフィールド コントロールと GridView コントロールで列フィールドをプログラムで管理することができます。

列を明示的に宣言されたフィールドは、自動的に生成された列のフィールドと共に表示できます。 両方を使用する場合に最初に列を明示的に宣言されたフィールドが表示後に自動的に生成される列フィールドがされます。

## <a name="binding-to-data"></a>データへのバインド

GridView コントロールをデータ ソース コントロールにバインドできます (など**SqlDataSource**、 **ObjectDataSource**など)、System.Collections.IEnumerable を実装するすべてのデータ ソースだけでなく、インターフェイス (System.Data.DataView、System.Collections.ArrayList、System.Collections.Hashtable など)。 GridView コントロールを適切なデータ ソースの種類にバインドするのにには、次のメソッドのいずれかを使用します。

- データ ソース コントロールにバインドするには、データ ソース コントロールの ID 値を GridView コントロールの DataSourceID プロパティを設定します。 GridView コントロールは自動的に指定されたデータ ソース コントロールにバインドし、活用できるため、データ ソースの並べ替え、更新、削除、およびページング機能を実行するコントロールの機能。 これは、データにバインドする推奨される方法です。
- System.Collections.IEnumerable インターフェイスを実装するデータ ソースにバインドするにはには、プログラムでデータ ソースに GridView コントロールの DataSource プロパティを設定してから DataBind メソッドを呼び出します。 このメソッドを使用して、組み込みの並べ替え、更新、削除、ページング機能および GridView コントロールは提供されません。 自分でこの機能を提供する必要があります。

## <a name="data-operations"></a>データ操作

GridView コントロールは、並べ替え、更新、削除、選択、およびコントロール内の項目をページにユーザーに許可する多くの組み込み機能を提供します。 データ ソース コントロールに GridView コントロールをバインドすると、ときに GridView コントロールは、データ ソース コントロールの機能を活用し、自動並べ替え、更新、および削除機能を提供できます。

> [!NOTE]
> GridView コントロールは、並べ替え、更新、および他の種類のデータ ソースを削除するためサポートを提供できます。ただし、これらの操作の実装に適切なイベント ハンドラーを提供する必要があります。


列のヘッダーをクリックして、特定の列に関して GridView コントロールで項目の並べ替えにユーザーを並べ替えできます。 並べ替えを有効にする、AllowSorting プロパティを設定**true**します。

ときにボタンを自動更新、削除、および選択機能が有効になって、 **ButtonField**または**TemplateField** 「編集」、「削除」、"Select"のコマンド名で、列のフィールドそれぞれをクリックします。 自動的に GridView コントロールを追加、 **CommandField**列フィールドを編集、削除、またはにAutoGenerateEditButton、AutoGenerateDeleteButton、またはAutoGenerateSelectButtonプロパティが設定されている場合、[選択]ボタンで**true**、それぞれします。

> [!NOTE]
> データ ソースにレコードを挿入は直接サポートされていません、GridView コントロールでします。 ただし、と共に、DetailsView コントロールを GridView、FormView コントロールを使用してレコードを挿入することができます。


データ ソース内のすべてのレコードを表示すると同時に、代わりには、ページをレコードを GridView コントロールが自動的に分割できます。 ページングを有効にする、AllowPaging プロパティを設定**true**します。

## <a name="customizing-the-user-interface"></a>ユーザー インターフェイスのカスタマイズ

GridView コントロールの外観をカスタマイズするには、コントロールのさまざまな部分のスタイル プロパティを設定します。 次の表は、異なるスタイル プロパティを一覧表示します。

| **スタイル プロパティ** | **説明** |
| --- | --- |
| AlternatingRowStyle | GridView コントロールの交互のデータ行のスタイル設定します。 RowStyle 設定間で切り替えると、データ行を表示するこのプロパティが設定されている場合、 **AlternatingRowStyle**設定します。 |
| EditRowStyle | GridView コントロールで編集される行のスタイル設定します。 |
| EmptyDataRowStyle | データ ソースにレコードが含まれていない場合に、GridView コントロールに表示される空のデータ行のスタイル設定します。 |
| FooterStyle | GridView コントロールのフッター行のスタイル設定します。 |
| 後 | GridView コントロールのヘッダー行のスタイル設定します。 |
| PagerStyle | GridView コントロールのページャーのスタイル設定します。 |
| RowStyle | GridView コントロール内のデータ行のスタイル設定します。 ときに、 **AlternatingRowStyle**プロパティも設定されて、交互のデータ行が表示されます、 **RowStyle**設定と**AlternatingRowStyle**設定します。 |
| SelectedRowStyle | GridView コントロールで選択した行のスタイル設定します。 |

表示またはコントロールのさまざまな部分を非表示にすることもできます。 次の表には、どの部分を表示または非表示を制御するプロパティが一覧表示します。

| **プロパティ** | **説明** |
| --- | --- |
| ShowFooter | GridView コントロールのフッター セクションの表示と非表示を切り替えます。 |
| ShowHeader | GridView コントロールのヘッダー セクションの表示と非表示を切り替えます。 |

### <a name="events"></a>イベント

GridView コントロールは、プログラミングに使用できるいくつかのイベントを提供します。 これにより、イベントが発生するたびに、カスタムのルーチンを実行することができます。 次の表には、GridView コントロールでサポートされているイベントが一覧表示します。

| **event** | **説明** |
| --- | --- |
| PageIndexChanged | GridView コントロールがページング操作を処理した後、ページャー ボタンのいずれかがクリックされたときに発生します。 このイベントは通常、ユーザーがコントロールで別のページに移動した後にタスクを実行する必要がある場合に使用します。 |
| PageIndexChanging | ページャー ボタンのいずれかがクリックされたが、コントロールがページング操作を処理する GridView の前に発生します。 このイベントは、ページング操作をキャンセルするよく使用されます。 |
| RowCancelingEdit | GridView コントロールの前に編集モードを終了行の [キャンセル] ボタンがクリックされたときに発生します。 このイベントがキャンセル操作を停止によく使用されます。 |
| RowCommand | GridView コントロールにボタンがクリックされたときに発生します。 このイベントは、コントロールにボタンがクリックされたときにタスクを実行する多くの場合、使用します。 |
| RowCreated | GridView コントロールで新しい行が作成されるときに発生します。 このイベントは、行が作成されるときに、行の内容を変更するよく使用されます。 |
| RowDataBound | データ行が GridView コントロールのデータにバインドされている場合に発生します。 このイベントは、行がデータにバインドされる行の内容の変更によく使用されます。 |
| RowDeleted | GridView コントロールは、データ ソースからレコードを削除した後、行の Delete ボタンがクリックされたときに発生します。 このイベントは、削除操作の結果を確認するよく使用されます。 |
| RowDeleting | GridView の前に、コントロールは、データ ソースからレコードを削除します行の Delete ボタンがクリックされたときに発生します。 このイベントは削除操作をキャンセルによく使用されます。 |
| RowEditing | 行の編集 ボタンをクリックするが GridView の前にコントロールが編集モードに入ると発生します。 このイベントは編集操作をキャンセルによく使用されます。 |
| RowUpdated | GridView コントロールは、行を更新した後、行の Update ボタンがクリックされたときに発生します。 このイベントは、更新操作の結果の確認によく使用されます。 |
| RowUpdating | 行の Update ボタンがクリックされたが、コントロール、GridView の前に行を更新すると発生します。 このイベントは、更新操作をキャンセルするよく使用されます。 |
| SelectedIndexChanged | GridView コントロールが選択操作を処理した後、行の Select ボタンがクリックされたときに発生します。 このイベントは、コントロールで行を選択した後にタスクを実行する多くの場合、使用します。 |
| SelectedIndexChanging | 行の Select ボタンがクリックされたが、コントロールが選択操作を処理する GridView の前に発生します。 このイベントは、選択操作をキャンセルするよく使用されます。 |
| 並べ替え | GridView コントロールが並べ替え操作を処理した後、列を並べ替えるハイパーリンクがクリックされたときに発生します。 このイベントは、ユーザーが列を並べ替えるハイパーリンクをクリックした後にタスクを実行する通常使用します。 |
| 並べ替え | 列を並べ替えるハイパーリンクがクリックされたが、コントロールが並べ替え操作を処理する GridView の前に発生します。 並べ替え操作をキャンセルするか、カスタムの並べ替えルーチンを実行するこのイベントは、よく使用されます。 |

## <a name="formview"></a>FormView

FormView コントロールは、データ ソースから 1 つのレコードの表示に使用されます。 行のフィールドではなく、ユーザー定義のテンプレートが表示されます。 ただし、DetailsView コントロールに似ています。 独自のテンプレートを作成、データを表示する方法を制御するのには柔軟性が提供されます。 FormView コントロールには、次の機能がサポートされています。

- SqlDataSource や ObjectDataSource などのソース コントロールのデータにバインドします。
- 組み込みの挿入機能します。
- 組み込みの更新と機能を削除しています。
- 組み込みのページング機能。
- プロパティを動的に設定する FormView オブジェクト モデルへのプログラムによるアクセスは、イベントを処理したり、具合です。
- ユーザー定義のテンプレート、テーマ、およびスタイルを使用したカスタマイズ可能な外観です。

## <a name="templates"></a>テンプレート

FormView コントロールにコンテンツを表示するには、コントロールのさまざまな部分のテンプレートを作成する必要があります。 ほとんどのテンプレートは、省略可能です。ただし、コントロールが構成されているモード用のテンプレートを作成する必要があります。 たとえば、レコードの挿入をサポートする FormView コントロールでは、定義されている挿入項目テンプレートが必要です。 次の表には、作成できるさまざまなテンプレートが一覧表示します。

| **テンプレートの種類** | **説明** |
| --- | --- |
| EditItemTemplate | FormView コントロールが編集モードの場合は、データ行のコンテンツを定義します。 通常、このテンプレートには、入力コントロールとするユーザーが既存のレコードの編集に使用できるコマンド ボタンが含まれます。 |
| EmptyDataTemplate | FormView コントロールが任意のレコードがないデータ ソースにバインドされているときに表示される空のデータ行のコンテンツを定義します。 通常、このテンプレートには、データ ソースにレコードが含まれていないことをユーザーにアラートを生成するコンテンツが含まれます。 |
| 後 | フッター行のコンテンツを定義します。 通常、このテンプレートには、フッター行に表示するには、その他のコンテンツが含まれます。 代わりに、単に FooterText プロパティを設定して、フッター行に表示するテキストを指定できます。 |
| Header テンプレート | ヘッダー行のコンテンツを定義します。 通常、このテンプレートには、ヘッダー行に表示するには、その他のコンテンツが含まれます。 代わりに、単に HeaderText プロパティを設定して、ヘッダー行に表示するテキストを指定できます。 |
| ItemTemplate | FormView コントロールが読み取り専用モードの場合は、データ行のコンテンツを定義します。 通常、このテンプレートには、既存のレコードの値を表示するコンテンツが含まれます。 |
| InsertItemTemplate | FormView コントロールが挿入モードの場合は、データ行のコンテンツを定義します。 通常、このテンプレートには、入力コントロールと、ユーザーが新しいレコードを追加するコマンド ボタンが含まれます。 |
| PagerTemplate | ページング機能が有効になっているときに表示されるページ行のコンテンツを定義します (に AllowPaging プロパティを設定すると**true**)。 通常、このテンプレートをユーザーが別のレコードに移動できるコントロールが含まれます。 |

項目テンプレートの編集と挿入項目テンプレートの入力コントロールは、双方向のバインド式を使用してデータ ソースのフィールドにバインドできます。 これにより、自動的に更新プログラムの入力コントロールの値を抽出または操作を挿入する FormView コントロールできます。 双方向のバインド式は、入力コントロールを使用する元のフィールド値を自動的に表示する項目テンプレートの編集でも。

### <a name="binding-to-data"></a>データへのバインド

FormView コントロールをデータ ソース コントロールにバインドできます (など**SqlDataSource**、AccessDataSource、 **ObjectDataSource**など)、または実装する任意のデータ ソースに、(System.Data.DataView、System.Collections.ArrayList、や System.Collections.Hashtable) System.Collections.IEnumerable インターフェイスです。 FormView コントロールを適切なデータ ソースの種類にバインドするのには、次のメソッドのいずれかを使用します。

- データ ソース コントロールにバインドするには、データ ソース コントロールの ID 値を FormView コントロールの DataSourceID プロパティを設定します。 FormView コントロールが自動的に指定されたデータ ソース コントロールにバインドし、活用できるため、データ ソース コントロールの機能を挿入、更新、削除、およびページング機能を実行します。 これは、データにバインドする推奨される方法です。
- 実装するデータ ソースにバインドする、 **System.Collections.IEnumerable**インターフェイス、プログラムでデータ ソースに FormView コントロールの DataSource プロパティを設定および DataBind メソッドを呼び出します。 このメソッドを使用する場合、FormView コントロールは、組み込みの挿入、更新、削除、およびページング機能を提供されません。 適切なイベントを使用してこの機能を提供する必要があります。

## <a name="data-operations"></a>データ操作

FormView コントロールは、更新、削除、挿入、およびコントロール内の項目をページにユーザーに許可する多くの組み込み機能を提供します。 FormView コントロールがデータ ソース コントロールにバインドされると、FormView コントロールは、データ ソース コントロールの機能を活用し、自動更新、削除、挿入、ページング機能およびを提供できます。 FormView コントロールは、update、delete、insert、およびその他の種類のデータ ソースのページング操作のサポートを提供できます。ただし、これらの操作の実装で、適切なイベント ハンドラーを提供する必要があります。

FormView コントロールは、テンプレートを使用しているため、更新、削除、または挿入操作を実行するコマンド ボタンを自動的に生成する方法は提供されません。 これらのコマンド ボタンは、適切なテンプレートに手動で含める必要があります。 FormView コントロールが特定のボタンを認識してその**CommandName**プロパティが特定の値に設定します。 次の表では、FormView コントロールによって認識されるコマンド ボタンを示します。

| **ボタン** | **Commandname 値** | **説明** |
| --- | --- | --- |
| キャンセル | [キャンセル] | 操作をキャンセルして、ユーザーが入力した値を破棄する更新操作または挿入に使用されます。 FormView コントロールは、DefaultMode プロパティで指定されたモードに戻ります。 |
| 削除 | "削除" | 削除操作でデータ ソースから表示されているレコードを削除するために使用します。 ItemDeleting と ItemDeleted イベントを発生させます。 |
| 編集 | [編集] | 更新操作で編集モードに FormView コントロールを配置するために使用します。 指定されたコンテンツ、**後**データ行のプロパティが表示されます。 |
| 挿入 | "Insert" | 挿入操作で、ユーザーが指定した値を使用してデータ ソースに新しいレコードを挿入しようとするために使用します。 ItemInserting と ItemInserted イベントを発生させます。 |
| 新規作成 | "New" | FormView コントロールを挿入モードに配置するのには、挿入操作で使用します。 指定されたコンテンツ、**後**データ行のプロパティが表示されます。 |
| ページ | "Page" | ページングを実行するページ行のボタンを表すには、ページング操作で使用します。 ページング操作を指定するには、設定、 **CommandArgument** "Next"、"Prev"、"First"、"Last"、または移動先ページのインデックスをボタンのプロパティ。 PageIndexChanging と PageIndexChanged イベントを発生させます。 |
| 更新 | [更新] | 更新操作で、ユーザーが指定した値を持つデータ ソースに表示されているレコードを更新しようとするために使用します。 ItemUpdating と ItemUpdated イベントを発生させます。 |

削除とは異なりボタン (が削除され、表示されているレコードすぐに)、編集または新規のボタンがクリックされたときにコントロールが編集を負って FormView または挿入モードをそれぞれします。 コンテンツを編集モードに含まれている、**後**現在のデータ項目のプロパティが表示されます。 通常、項目テンプレートの編集は、[編集] ボタンは [キャンセル] ボタンと更新プログラムに置き換えられますされるように定義されます。 (テキスト ボックスやチェック ボックス コントロール) のフィールドのデータ型の適切な入力コントロールには、フィールドの値を変更するユーザーには、通常は表示されます。 キャンセル ボタンをクリックすると変更を破棄中に、データ ソースのレコードを更新の更新 ボタンをクリックします。

含まれるコンテンツでは、同様に、**後**コントロールが挿入モードのときに、データ項目のプロパティが表示されます。 項目を挿入するテンプレートは通常、新しいボタンが、挿入し、[キャンセル] ボタン、置き換えし、空の入力コントロールが新しいレコードの値を入力するユーザーの表示になるように定義されます。 [キャンセル] ボタンをクリックすると変更を破棄中に、データ ソースにレコードが挿入 [挿入] ボタンをクリックします。

FormView コントロールでは、データ ソース内の他のレコードに移動するユーザーを許可するページング機能を提供します。 有効な場合、ページ ナビゲーション コントロールを格納している FormView コントロールのページャー行が表示されます。 ページングを有効にするには設定、 **AllowPaging**プロパティを**true**します。 ページ行をカスタマイズするには、PagerStyle に含まれるオブジェクトのプロパティと PagerSettings プロパティを設定します。 使用して、独自の UI を作成する、組み込みのページャー行 UI を使用する代わりに、 **PagerTemplate**プロパティ。

## <a name="customizing-the-user-interface"></a>ユーザー インターフェイスのカスタマイズ

FormView コントロールの外観をカスタマイズするには、コントロールのさまざまな部分のスタイル プロパティを設定します。 次の表は、異なるスタイル プロパティを一覧表示します。

| **スタイル プロパティ** | **説明** |
| --- | --- |
| EditRowStyle | FormView コントロールがデータ行のスタイルの設定は編集モードです。 |
| EmptyDataRowStyle | データ ソースにレコードが含まれていない場合に、FormView コントロールに表示される空のデータ行のスタイル設定します。 |
| FooterStyle | FormView コントロールのフッター行のスタイル設定します。 |
| 後 | FormView コントロールのヘッダー行のスタイル設定します。 |
| InsertRowStyle | FormView コントロールがデータ行のスタイルの設定は、モードを挿入します。 |
| PagerStyle | ページング機能が有効な場合は、FormView コントロールに表示されるページ行のスタイル設定します。 |
| RowStyle | FormView コントロールが読み取り専用モードの場合は、データ行のスタイル設定します。 |

## <a name="events"></a>イベント

FormView コントロールは、プログラミングに使用できるいくつかのイベントを提供します。 これにより、イベントが発生するたびに、カスタムのルーチンを実行することができます。 次の表には、FormView コントロールでサポートされているイベントが一覧表示します。

| **event** | **説明** |
| --- | --- |
| ItemCommand | FormView コントロール内のボタンがクリックされたときに発生します。 このイベントは、コントロールにボタンがクリックされたときにタスクを実行する多くの場合、使用します。 |
| ItemCreated | FormView コントロールで FormViewRow のすべてのオブジェクトが作成された後に発生します。 このイベントが表示される前に、レコードの値を変更するよく使用されます。 |
| ItemDeleted | [削除] ボタンのときに発生します (ボタンがその**CommandName**プロパティが"Delete"に設定) がクリックされた FormView コントロールがデータ ソースからレコードを削除した後。 このイベントは、削除操作の結果を確認するよく使用されます。 |
| ItemDeleting | [削除] ボタンがクリックされたが、フォーム ビューの前に、コントロールは、データ ソースからレコードを削除するときに発生します。 このイベントは削除操作をキャンセルによく使用されます。 |
| ItemInserted | Insert ボタンのときに発生します (ボタンがその**CommandName** "Insert"に設定するプロパティ) がクリックされた FormView コントロールは、レコードを挿入した後。 このイベントは、挿入操作の結果の確認によく使用されます。 |
| ItemInserting | コントロール、フォーム ビューの前にレコードが挿入の Insert ボタンがクリックされたときに発生します。 このイベントは、挿入操作をキャンセルするよく使用されます。 |
| ItemUpdated | Update ボタンのときに発生します (ボタンがその**CommandName**プロパティが「更新」に設定) がクリックされた FormView コントロールが行を更新した後。 このイベントは、更新操作の結果の確認によく使用されます。 |
| ItemUpdating | Update ボタンがクリックされたが、コントロールは、フォーム ビューの前にレコードを更新すると発生します。 このイベントは、更新操作をキャンセルするよく使用されます。 |
| ModeChanged | FormView コントロールがモードを変更後に発生します (編集、挿入、または読み取り専用モードの場合) にします。 このイベントは、FormView コントロール モードが変更されたときにタスクを実行する多くの場合、使用します。 |
| ModeChanging | FormView コントロール モードを変更する前に発生します (編集、挿入、または読み取り専用モードの場合) にします。 このイベントは、モードの変更をキャンセルするよく使用されます。 |
| PageIndexChanged | FormView コントロールがページング操作を処理した後、ページャー ボタンのいずれかがクリックされたときに発生します。 このイベントは通常、ユーザーがコントロールで別のレコードに移動した後にタスクを実行する必要がある場合に使用します。 |
| PageIndexChanging | ページャー ボタンのいずれかがクリックされたが、フォーム ビューの前にコントロールがページング操作を処理すると発生します。 このイベントは、ページング操作をキャンセルするよく使用されます。 |

## <a name="detailsview"></a>DetailsView

DetailsView コントロールは、テーブルの行で、レコードの各フィールドが表示される場所、テーブル内のデータ ソースから 1 つのレコードの表示に使用されます。 マスター/詳細のシナリオの GridView コントロールと組み合わせて使用できます。 DetailsView コントロールでは、次の機能をサポートします。

- SqlDataSource などのソース コントロールのデータにバインドします。
- 組み込みの挿入機能します。
- 組み込みの更新と機能を削除しています。
- 組み込みのページング機能。
- プロパティを動的に設定する DetailsView オブジェクト モデルへのプログラムによるアクセスは、イベントを処理したり、具合です。
- 外観のカスタマイズ テーマとスタイルを使用します。

## <a name="row-fields"></a>行のフィールド

DetailsView コントロールでは、各データ行は、フィールド コントロールを宣言することによって作成されます。 行フィールドの種類は、コントロール内の行の動作を決定します。 フィールド コントロールは、DataControlField から派生します。 次の表では、使用できる行のフィールドの種類を示します。

| **列フィールドの種類** | **説明** |
| --- | --- |
| BoundField | データ ソースのフィールドの値をテキストとして表示します。 |
| ButtonField | DetailsView コントロールでは、コマンド ボタンを表示します。 これにより、追加または削除 ボタンなどのカスタム ボタン コントロールで行を表示することができます。 |
| CheckBoxField | DetailsView コントロールでチェック ボックスを表示します。 この種類の行フィールドはよくブール値を持つフィールドを表示するために使用します。 |
| CommandField | 組み込みのコマンドを表示、編集を実行するボタンは、挿入、または、DetailsView コントロールでの操作を削除します。 |
| HyperLinkField | データ ソース内のフィールドの値をハイパーリンクとして表示します。 この種類の行フィールドを使用すると、2 番目のフィールドをハイパーリンクの URL にバインドできます。 |
| ImageField | DetailsView コントロールでイメージを表示します。 |
| TemplateField | ユーザー定義コンテンツの指定したテンプレートに応じて、DetailsView コントロール内の行が表示されます。 この種類の行フィールドを使用して、カスタム行フィールドを作成できます。 |

既定では、AutoGenerateRows プロパティに設定が**true**、データ ソースのバインド可能な型の各フィールドにバインドされる行フィールド オブジェクトを自動的に生成します。 有効なバインド可能な型は、文字列、DateTime、Decimal、Guid、およびプリミティブ型のセットです。 行には、各フィールドは、データ ソース内の各フィールドが表示される順序でのテキストとして表示されます。

行を自動的に生成するレコード内のすべてのフィールドを表示する迅速かつ簡単な方法を提供します。 ただし、DetailsView を使用するようコントロールの詳細機能 DetailsView コントロールに含める行フィールドを明示的に宣言する必要があります。 行フィールドを宣言し、最初に設定する、 **AutoGenerateRows**プロパティを**false**します。 次に、追加の開閉**&lt;フィールド&gt;** と DetailsView コントロールのタグと終了タグの間のタグ。 最後に、開始タグと終了の間に挿入する行のフィールドを一覧**&lt;フィールド&gt;** タグ。 指定された行のフィールドは、表示されている順序でフィールド コレクションに追加されます。 **フィールド**コレクションでは、DetailsView コントロールで行のフィールドをプログラムで管理できます。

> [!NOTE]
> 行のフィールドが Fields コレクションに追加されませんが自動的に生成されます。


## <a name="binding-to-data"></a>データへのバインド

DetailsView コントロールをなど、データ ソース コントロールにバインドできる**SqlDataSource**または AccessDataSource、または、System.Data.DataView など、System.Collections.IEnumerable インターフェイスを実装する任意のデータ ソースSystem.Collections.ArrayList System.Collections.Hashtable.

DetailsView コントロールを適切なデータ ソースの種類にバインドするのにには、次のメソッドのいずれかを使用します。

- データ ソース コントロールにバインドするには、データ ソース コントロールの ID 値に DetailsView コントロールの DataSourceID プロパティを設定します。 DetailsView コントロールは、指定したデータ ソース コントロールに自動的にバインドします。 これは、データにバインドする推奨される方法です。
- 実装するデータ ソースにバインドする、 **System.Collections.IEnumerable**インターフェイス、プログラムでデータ ソースに DetailsView コントロールの DataSource プロパティを設定および DataBind メソッドを呼び出します。

## <a name="security"></a>セキュリティ

このコントロールは、悪意のあるクライアント スクリプトを含めることがユーザー入力を表示に使用できます。 スクリプトの実行可能ファイル、SQL ステートメント、またはその他のコード、アプリケーションで表示する前に、クライアントから送信されるすべての情報を確認します。 ASP.NET では、入力要求の検証機能があり、ユーザー入力でのブロック スクリプトと HTML を提供します。

## <a name="data-operations"></a>データ操作

DetailsView コントロールは、更新、削除、挿入、およびコントロール内の項目をページにユーザーに許可する組み込みの機能を提供します。 DetailsView コントロールがデータ ソース コントロールにバインドされると、DetailsView コントロールは、データ ソース コントロールの機能を活用し、自動更新、削除、挿入、ページング機能およびを提供できます。

DetailsView コントロールは、update、delete、insert、およびその他の種類のデータ ソースのページング操作のサポートを提供できます。ただし、これらの操作で、適切なイベント ハンドラーの実装を提供する必要があります。

自動的に DetailsView コントロールを追加、 **CommandField** にAutoGenerateEditButton、AutoGenerateDeleteButton、またはAutoGenerateInsertButtonプロパティを設定して、編集、削除、または新規ボタンの行フィールド**true**、それぞれします。 削除とは異なりボタン (削除する選択したレコードすぐに)、[編集] または [新規] ボタンがクリックされたときに、DetailsView コントロールは編集にまたは挿入モードをそれぞれします。 編集モードでは、[編集] ボタンは [キャンセル] ボタンと更新プログラムに置き換えられます。 (テキスト ボックスやチェック ボックス コントロール) のフィールドのデータ型の適切な入力コントロールには、フィールドの値を変更するユーザーには表示されます。 キャンセル ボタンをクリックすると変更を破棄中に、データ ソースのレコードを更新の更新 ボタンをクリックします。 同様に、挿入モードの場合は、新しいボタンが、挿入し、[キャンセル] ボタン、置き換えられ、新しいレコードの値を入力するユーザーに対して空の入力コントロールが表示されます。

DetailsView コントロールでは、データ ソース内の他のレコードに移動するユーザーを許可するページング機能を提供します。 有効な場合、ページ ナビゲーション コントロールは、ページの行に表示されます。 ページングを有効にする、AllowPaging プロパティを設定**true**します。 PagerStyle と PagerSettings プロパティを使用して、ページ行をカスタマイズできます。

## <a name="customizing-the-user-interface"></a>ユーザー インターフェイスのカスタマイズ

DetailsView コントロールの外観をカスタマイズするには、コントロールのさまざまな部分のスタイル プロパティを設定します。 次の表は、異なるスタイル プロパティを一覧表示します。

| **スタイル プロパティ** | **説明** |
| --- | --- |
| AlternatingRowStyle | DetailsView コントロールに交互のデータ行のスタイル設定します。 RowStyle 設定間で切り替えると、データ行を表示するこのプロパティが設定されている場合、 **AlternatingRowStyle**設定します。 |
| CommandRowStyle | DetailsView コントロールでの組み込みコマンド ボタンを含む行のスタイル設定します。 |
| EditRowStyle | DetailsView コントロールがデータ行のスタイルの設定は編集モードです。 |
| EmptyDataRowStyle | データ ソースにレコードが含まれていない場合に DetailsView コントロールに表示される空のデータ行のスタイル設定します。 |
| FooterStyle | DetailsView コントロールのフッター行のスタイル設定します。 |
| 後 | DetailsView コントロールのヘッダー行のスタイル設定します。 |
| InsertRowStyle | DetailsView コントロールがデータ行のスタイルの設定は、モードを挿入します。 |
| PagerStyle | DetailsView コントロールのページャーのスタイル設定します。 |
| RowStyle | DetailsView コントロール内のデータ行のスタイル設定します。 ときに、 **AlternatingRowStyle**プロパティも設定されて、交互のデータ行が表示されます、 **RowStyle**設定と**AlternatingRowStyle**設定します。 |
| FieldHeaderStyle | DetailsView コントロールのヘッダー列のスタイル設定します。 |

## <a name="events"></a>イベント

DetailsView コントロールでは、いくつかのイベントに対してプログラミングを行うことができますを提供します。 これにより、イベントが発生するたびに、カスタムのルーチンを実行することができます。 次の表には、DetailsView コントロールでサポートされているイベントが一覧表示します。 DetailsView コントロールでは、その基本クラスからこれらのイベントも継承します。データ バインド、データ バインド、破棄、Init、Load、PreRender、およびレンダリング。

| **event** | **説明** |
| --- | --- |
| ItemCommand | DetailsView コントロールで、ボタンがクリックされたときに発生します。 |
| ItemCreated | DetailsView コントロールで DetailsViewRow のすべてのオブジェクトが作成された後に発生します。 このイベントが表示される前に、レコードの値を変更するよく使用されます。 |
| ItemDeleted | DetailsView コントロールがデータ ソースからレコードを削除した後、[削除] ボタンがクリックされたときに発生します。 このイベントは、削除操作の結果を確認するよく使用されます。 |
| ItemDeleting | [削除] ボタンがクリックされたが、コントロールは、DetailsView する前に、データ ソースからレコードを削除するときに発生します。 このイベントは削除操作をキャンセルによく使用されます。 |
| ItemInserted | DetailsView コントロールは、レコードを挿入した後の Insert ボタンがクリックされたときに発生します。 このイベントは、挿入操作の結果の確認によく使用されます。 |
| ItemInserting | コントロール、DetailsView する前にレコードが挿入の Insert ボタンがクリックされたときに発生します。 このイベントは、挿入操作をキャンセルするよく使用されます。 |
| ItemUpdated | DetailsView コントロールで行を更新した後、Update ボタンがクリックされたときに発生します。 このイベントは、更新操作の結果の確認によく使用されます。 |
| ItemUpdating | Update ボタンがクリックされたが、コントロールは、DetailsView する前にレコードを更新すると発生します。 このイベントは、更新操作をキャンセルするよく使用されます。 |
| ModeChanged | DetailsView コントロール (編集、挿入、または読み取り専用モード) のモードを変更した後に発生します。 このイベントは、DetailsView コントロールのモードが変更されたときにタスクを実行する多くの場合、使用します。 |
| ModeChanging | DetailsView コントロール (編集、挿入、または読み取り専用モード) のモードを変更する前に発生します。 このイベントは、モードの変更をキャンセルするよく使用されます。 |
| PageIndexChanged | DetailsView コントロールがページング操作を処理した後、ページャー ボタンのいずれかがクリックされたときに発生します。 このイベントは通常、ユーザーがコントロールで別のレコードに移動した後にタスクを実行する必要がある場合に使用します。 |
| PageIndexChanging | ページャー ボタンのいずれかがクリックされたが、DetailsView する前にコントロールがページング操作を処理すると発生します。 このイベントは、ページング操作をキャンセルするよく使用されます。 |

## <a name="the-menu-control"></a>メニュー コントロール

ASP.NET 2.0 では、メニュー コントロールは、すべての機能を備えたナビゲーション システム設計されています。 データ バインド、SiteMapDataSource などの階層的なデータ ソースを簡単にできます。

メニュー コントロールの構造は、宣言または動的に定義されていることができ、単一のルート ノードとサブ ノードの任意の数で構成されます。 次のコードは、宣言によって、メニュー コントロールのメニューを定義します。

[!code-aspx[Main](data-bound-controls/samples/sample4.aspx)]

上記の例では、Home.aspx ノードは、ルート ノードです。 その他のすべてのノードはさまざまなレベルのルート ノード内で入れ子になった。

メニュー コントロールをレンダリングできる; メニューの 2 種類があります。静的なメニューと動的メニュー。 静的なメニューは、常に表示されるメニュー項目で構成されます。 動的メニューは、ユーザーがマウスを使用してその上に置く場合にのみ表示されるメニュー項目で構成されます。 顧客は、宣言によって定義されているメニューと静的なメニューとメニューは実行時にデータ バインドを動的メニューに多くの場合と混同可能性があります。 実際には、動的および静的なメニューでは、母集団のメソッドには関連しません。 条件*静的*と*動的*ユーザーが何らかのアクションを表示、メニューは、静的に既定で表示されているかのみかどうかのみを参照してください。

**StaticDisplayLevels**プロパティは、メニューのレベル数は、静的でそのため、既定で表示されている構成に使用します。 上記の例では、設定、 **StaticDisplayLevels** 2 の値にプロパティを静的に、[ホーム] ノード、[音楽] ノードおよび映画ノードを表示するメニューとなります。 他のすべてのノードは、ユーザーが親ノードを重ねたときに動的に表示されます。

**MaximumDynamicDisplayLevels**プロパティは、最大数を構成します。 動的レベルのメニューに表示することができます。 によって指定された値よりも高いレベルで動的メニュー、 **MaximumDynamicDisplayLevels**プロパティは破棄されます。

> [!NOTE]
> メニューが MaximumDynamicDisplayLevels プロパティを表示するために表示されない状況を発生する可能性はほぼ確実には。 ような場合、プロパティが、顧客のメニューの表示を許可するのに十分に設定されていることを確認します。


## <a name="data-binding-the-menu-control"></a>データ バインド メニュー コントロール

メニュー コントロール、SiteMapDataSource XMLDataSource などの任意の階層データ ソースにバインドできます。 SiteMapDataSource は、最もよく使用されるメソッドのメニュー コントロールへのデータ バインディングの Web.sitemap ファイルからフィードをそのスキーマには、Menu コントロールに既知の API が用意されています。 下のリストは、単純な Web.sitemap ファイルを示しています。

[!code-xml[Main](data-bound-controls/samples/sample5.xml)]

1 つだけルート siteMapNode 要素、ここでは、ホーム要素があることに注意してください。 いくつかの属性は、各 siteMapNode に対して構成できます。 最もよく使用される属性は次のとおりです。

- **url**ユーザーがメニュー項目をクリックしたときに表示する URL を指定します。 この属性が存在しない場合、クリックされたときに、ノードが投稿だけです。
- **タイトル**メニュー項目に表示されるテキストを指定します。
- **説明**ノードのドキュメントとして使用します。 ノードの上にマウスが置かれている場合は、ツール ヒントとしても表示します。
- **siteMapFile**サイト マップの入れ子になったためです。 この属性は、適切な形式での ASP.NET サイト マップ ファイルを指す必要があります。
- **ロール**ASP.NET セキュリティによるトリミングで制御するノードの外観を許可します。

これらの属性はすべて省略可能ですが、メニューの動作ができないこと指定されていない場合は、予期されるに注意してください。 たとえば場合、 *url*属性が指定されていますが、*説明*属性は、ノードは表示されませんおよび方法を指定された URL に移動することはありません。

## <a name="controlling-a-menus-operation"></a>メニューの操作を制御します。

ASP.NET の Menu コントロール; の動作に影響するいくつかのプロパティします。**向き**プロパティ、 **DisappearAfter**プロパティ、 **StaticItemFormatString**プロパティ、および**StaticPopoutImageUrl**プロパティにはこれらの一部にすぎません。

- **向き**設定できるいずれかに*水平*または*垂直*静的メニュー項目を行または垂直方向に水平方向にレイアウトし、積み上げかどうかを制御および1 つ別。 このプロパティは、動的メニューには影響しません。
- **DisappearAfter**プロパティ構成がどのくらいの時間動的メニューは表示されたまま、マウスが後から離れた場所に移動します。 値は、ミリ秒、500 の既定値で指定されます。 -1 の値にこのプロパティを設定すると、メニューに自動的に消えることはありません。 その場合は、メニューは、メニューの外部で、ユーザーがクリックしたときにのみ表示されません。
- **StaticItemFormatString**プロパティにより、簡単に、メニュー システムで一貫性のある表現を維持します。 このプロパティを指定するときに*{0}* データ ソースに表示される説明の代わりに入力する必要があります。 たとえば、演習 1 との製品ページを参照してくださいからメニュー項目などがあるするには指定のアクセス、 {0} StaticItemFormatString のページ。 ASP.NET がの出現を置換時に、{0}メニュー項目の適切な説明とします。
- **StaticPopoutImageUrl**プロパティ メニューの特定のノード上に置くことによってアクセスできる子ノードがあることを示すに使用されるイメージを指定します。 動的メニューでは、引き続き既定のイメージを使用します。

## <a name="templated-menu-controls"></a>テンプレート化されたメニュー コントロール

メニュー コントロールの template 宣言されたコントロールし、では、2 つの異なる項目テンプレートです。StaticItemTemplate し、後でします。 これらのテンプレートを使用することができます簡単に追加するサーバー コントロールまたはユーザー コントロール、メニューにします。

Visual Studio .NET でテンプレートを編集するには、スマート タグ ボタン、メニューをクリックし、テンプレートの編集を選択するか。 StaticItemTemplate、または、後の編集の間で選択できます。

StaticItemTemplate に追加された任意のコントロールは、ページの読み込み時に静的メニューに表示されます。 後に追加されたすべてのコントロールは、すべてのポップアップ メニューに表示されます。

## <a name="menu-events"></a>メニュー イベント

メニュー コントロールがそれに固有の 2 つのイベント**MenuItemClicked**と**MenuItemDatabound**イベント。

メニュー項目がクリックされたときに、MenuItemClicked イベントが発生します。 メニュー項目がデータ バインド MenuItemDatabound イベントが発生します。 **MenuEventArgs**渡されるイベントにハンドラーは、項目のプロパティを使用してメニュー項目へのアクセスを提供します。

## <a name="controlling-a-menus-appearance"></a>メニューの外観を制御します。

1 つまたは複数の形式のメニューに使用できる多くのスタイルを使用してメニュー コントロールの外観も影響を与えることができます。 これらの間では**StaticMenuStyle**、 **DynamicMenuStyle**、 **DynamicMenuItemStyle**、 **DynamicSelectedStyle**、および**DynamicHoverStyle**します。 これらのプロパティは、標準 HTML スタイルの文字列を使用して構成されます。 たとえば、次に動的メニューのスタイルを影響します。

[!code-aspx[Main](data-bound-controls/samples/sample6.aspx)]

> [!NOTE]
> 任意のポイント時のスタイルを使用している場合は、追加する必要があります。、&lt;ヘッド&gt;内の要素を含むページに、 *runat*要素に設定*server*します。


メニュー コントロールは、ASP.NET 2.0 テーマの使用もサポートします。

## <a name="the-treeview-control"></a>TreeView コントロール

TreeView コントロールでは、ツリーに似た構造でデータを表示します。 メニュー コントロールと同様に簡単にできます、SiteMapDataSource などの任意の階層データ ソースにバインドされたデータ。

ASP.NET の使用可能だった TreeView IE WebControl に関連しているかどうかが ASP.NET 2.0 の TreeView コントロールについて質問する可能性がある最初の問題は、1.x します。 そうじゃないです。 ASP.NET 2.0 の TreeView コントロールでは、一から作成されておりでは、使用可能だった IE TreeView WebControl に比べて大幅に向上。

メニュー コントロールとまったく同じ方法で実行されるサイト マップする TreeView コントロールをバインドする方法の詳細に解説しません。 ただし、TreeView コントロールでは、動作の方法で異なるいくつか違いがあります。

既定では、ツリー ビュー コントロールには、完全に展開されたが表示されます。 初期ロード時に拡張レベルを変更するには、変更、 **ExpandDepth**コントロールのプロパティ。 これは、特定のノードを展開時にデータ バインドが、ツリー ビューである場合に特に重要です。

## <a name="databinding-the-treeview-control"></a>TreeView コントロールをデータ バインド

メニュー コントロールとは異なり、TreeView に役立ちも大量のデータを処理します。 したがって、XMLDataSource や SiteMapDataSource にデータ バインド、だけでなく、TreeView は多くの場合、データセットまたはその他のリレーショナル データにバインドされたデータ。 大量のデータに TreeView コントロールをバインドする場所の場合、実際には、コントロールに表示されているデータにのみバインドすることをお勧めします。 TreeView のノードを展開する、追加のデータにデータをバインドできます。

このような場合、 **PopulateOnDemand**に、ツリー ビューのプロパティを設定する必要があります*true*します。 実装を提供する必要がありますし、 **TreeNodePopulate**メソッド。

## <a name="data-binding-without-postback"></a>ポストバックなしのバインド データ

最初に、前の例でノードを展開するときに、ページがポスト バックを更新に注意してください。 これで、この例では問題ではありませんは、大量のデータと運用環境であることを想像できます。 良いシナリオで、ツリー ビューはまだ動的に、そのノードの設定も投稿なしをサーバーに 1 つとなります。

設定して、 **PopulateNodesFromClient**と**PopulateOnDemand**プロパティが true の場合、ASP.NET TreeView コントロールには、ポストバックなしのノードを動的に挿入します。 親ノードを展開すると、クライアントから、XMLHttp 要求が行われます、OnTreeNodePopulate イベントが発生します。 これを使用してデータを XML データ アイランドとサーバーが応答では、子ノードをバインドします。

ASP.NET は、この機能を実装するクライアント コードを動的に作成されます。 &lt;スクリプト&gt;AXD ファイルを指す、スクリプトが含まれているタグが生成されます。 たとえば、下のリストには、XMLHttp 要求を生成するスクリプト コードは、スクリプトのリンクが表示されます。

[!code-html[Main](data-bound-controls/samples/sample7.html)]

お使いのブラウザーで上記 AXD ファイルを参照し、開く、XMLHttp 要求を実装するコードが表示されます。 このメソッドは、顧客がスクリプト ファイルを変更することを防ぎます。

## <a name="controlling-the-operation-of-the-treeview-control"></a>TreeView コントロールの操作を制御します。

TreeView コントロールでは、コントロールの動作に影響するいくつかのプロパティがあります。 最も明白なプロパティは、 **ShowCheckBoxes**、 **ShowExpandCollapse**、および**ShowLines**します。

**ShowCheckBoxes**プロパティは、ノードが表示されるときに、チェック ボックスを表示するかどうかに影響します。 このプロパティの有効な値は**None**、**ルート**、**親**、**リーフ**、および**すべて**します。 これらにより、TreeView コントロールが次のように、影響します。

| **プロパティ値** | **効果** |
| --- | --- |
| なし | チェック ボックスは、すべてのノードは表示されません。 これは、既定の設定です。 |
| Root | チェック ボックスは、ルート ノードでのみ表示されます。 |
| 親 | チェック ボックスは、子ノードを持つこれらのノードでのみ表示されます。 これらの子ノードには、親ノードまたはリーフ ノードを指定できます。 |
| リーフ | 子ノードを持たないこれらのノードでのみ、チェック ボックスが表示されます。 |
| すべて | すべてのノードでは、チェック ボックスが表示されます。 |

チェック ボックスを使用しているときに、 **CheckedNodes**プロパティはポストバック時にオンになっているツリー ビュー ノードのコレクションを返します。

**ShowExpandCollapse**プロパティは、ルートと親ノードの横にある展開/折りたたみイメージの外観を制御します。 このプロパティ設定されている場合**false**TreeView のノードがハイパーリンクとしてレンダリングされ、展開/折りたたみは、リンクをクリックします。

**ShowLines**プロパティかどうか、行ではその親ノードの子ノードに接続を表示する制御します。 ときに**false** (既定)、行は表示されません。 ときに**true**、TreeView コントロールはによって指定されたフォルダーで行のイメージを使用するが、 **LineImagesFolder**プロパティ。

TreeView の線の外観をカスタマイズするには、Visual Studio .NET 2005 には、行のデザイナー ツールが含まれています。 以下として TreeView コントロールでスマート タグ ボタンを使用してこのツールにアクセスできます。


![](data-bound-controls/_static/image1.jpg)

**図 1**


選択と、**線のイメージのカスタマイズ**メニュー オプション、TreeView の線の外観を構成できるようにする、行のデザイナー ツールが起動されます。

## <a name="treeview-events"></a>TreeView イベント

TreeView コントロールでは、次の一意のイベントがあります。

- SelectedNodeChanged は、ノードが選択されているときに発生します。 基に、 **SelectAction**プロパティ。
- TreeNodeCheckChanged では、ノードの checkboxs 状態が変更されたときに発生します。
- TreeNodeExpanded は、ノードを展開されるときに発生します。 基に、 **SelectAction**プロパティ。
- TreeNodeCollapsed では、ノードが折りたたまれているときに発生します。
- TreeNodeDataBound 発生のノードがデータにバインドされています。
- ノードの内容が表示されたら、TreeNodePopulate が発生します。

**SelectAction**プロパティでは、構成、ノードが選択されているどのイベントが発生することができます。 SelectAction プロパティは、次の操作を提供します。

- TreeNodeSelectAction.Expand 発生 TreeNodeExpanded は、ノードを選択するとします。
- TreeNodeSelectAction.None には、ノードが選択されているときにイベントを発生しません。
- 既定値は、ノードを選択すると、SelectedNodeChanged イベントを発生させます。
- TreeNodeSelectAction.SelectExpand は、SelectedNodeChanged イベントと、ノードが選択されている場合は、TreeNodeExpanded イベントを発生させます。

## <a name="controlling-appearance-with-styles"></a>スタイルの外観を制御します。

TreeView コントロールは、スタイルを使用してコントロールの外観を制御するため、多くのプロパティを提供します。 使用可能なは、次のプロパティです。

| **プロパティ名** | **コントロール** |
| --- | --- |
| HoverNodeStyle | 上にマウスが置かれている場合は、ノードのスタイルを制御します。 |
| LeafNodeStyle | リーフ ノードのスタイルを制御します。 |
| NodeStyle | すべてのノードのスタイルを制御します。 (LeafNodeStyle) などの特定のノードのスタイルは、このスタイルをオーバーライドします。 |
| ParentNodeStyle | すべての親ノードのスタイルを制御します。 |
| RootNodeStyle | ルート ノードのスタイルを制御します。 |
| SelectedNodeStyle | 選択したノードのスタイルを制御します。 |

これらの各プロパティは読み取り専用です。 ただし、各戻り値は、 **TreeNodeStyle**を使用して、オブジェクト、およびそのオブジェクトのプロパティを変更できる、*プロパティ サブプロパティ*形式。 たとえば、設定する、 **ForeColor**のプロパティ、 **SelectedNodeStyle**、次の構文を使用します。

[!code-aspx[Main](data-bound-controls/samples/sample8.aspx)]

上記のタグが閉じられていないことに注意してください。 ここで示すように宣言の構文を使用する場合に Treeview ノードに追加 HTML コードもためにです。

使用してコードのスタイル プロパティを指定することも、 *property.subproperty*形式。 たとえば、設定するため、 **ForeColor**のプロパティ、 **RootNodeStyle**コードでは、次の構文を使用します。

[!code-csharp[Main](data-bound-controls/samples/sample9.cs)]

> [!NOTE]
> 別のスタイル プロパティの包括的な一覧、TreeNodeStyle オブジェクトで、MSDN のドキュメントを参照してください。


## <a name="the-sitemappath-control"></a>SiteMapPath コントロール

SiteMapPath コントロールは、ASP.NET 開発者向けのパンの階層リンク ナビゲーション コントロールを提供します。 その他のナビゲーション コントロールと同様に簡単にられるように XmlDataSource や SiteMapDataSource などのソース階層のデータにバインドされたデータ。

SiteMapPath コントロールは SiteMapNodeItem オブジェクトで構成をされます。 ノードの 3 つの種類があります。ルート ノード、親ノード、および現在のノード。 ルート ノードは、階層構造の上部にあるノードです。 現在のノードでは、現在のページを表します。 その他のすべてのノードは、親ノードです。

## <a name="controlling-the-operation-of-the-sitemappath-control"></a>SiteMapPath コントロールの操作を制御します。

SiteMapPath コントロールの操作を制御するプロパティは次のとおりです。

| **プロパティ** | **プロパティの説明** |
| --- | --- |
| ParentLevelsDisplayed | 親ノードの数が表示されるかを制御します。 既定では-1 で表示される親ノードの数に制限はありません。 |
| PathDirection | SiteMapPath の方向を制御します。 有効な値は RootToCurrent (既定値) および CurrentToRoot です。 |
| 可能 | SiteMapPath コントロール内のノードを区切る文字を制御する文字列。 既定値は。 します。 |
| RenderCurrentNodeAsLink | 現在のノードをリンクとしてレンダリングするかどうかを制御するブール値。 既定値は False です。 |
| SkipLinkText | スクリーン リーダーによって、ページを表示するときにアクセシビリティを支援します。 このプロパティは、SiteMapPath コントロールをスキップするスクリーン リーダーを使用できます。 この機能を無効にするには、String.Empty にプロパティを設定します。 |

## <a name="templated-sitemappath-controls"></a>テンプレート化された SiteMapPath コントロール

SiteMapControl はテンプレートのコントロールと、そのため、コントロールを表示するために使用するためのさまざまなテンプレートを定義できます。 SiteMapPath コントロールのテンプレートを編集するには、コントロールのスマート タグ] をクリックし、メニューから [テンプレートの編集を選択します。 使用可能なさまざまなテンプレートの間で選択することができますを次に示すよう SiteMapTasks メニューが表示されます。


![](data-bound-controls/_static/image2.jpg)

**図 2**


**NodeTemplate**テンプレートは、SiteMapPath 内のどのノードを参照します。 ノードがルート ノードまたは現在のノードの場合、 **RootNodeTemplate**または**CurrentNodeTemplate**が構成されている、NodeTemplate がオーバーライドされます。

## <a name="sitemappath-events"></a>SiteMapPath イベント

SiteMapPath コントロールがコントロール クラスから派生していない 2 つのイベント**ItemCreated**イベントと**ItemDataBound**イベント。 SiteMapPath 項目が作成されると、ItemCreated イベントが発生します。 SiteMapPath ノードのデータ バインディング時に、DataBind メソッドが呼び出されると、ItemDataBound が発生します。 A **SiteMapNodeItemEventArgs**オブジェクトが、項目のプロパティを使用して特定の SiteMapNodeItem へのアクセスを提供します。

## <a name="controlling-appearance-with-styles"></a>スタイルの外観を制御します。

次のスタイルは SiteMapPath コントロールの書式設定できます。

| **プロパティ名** | **コントロール** |
| --- | --- |
| CurrentNodeStyle | 現在のノードのテキストのスタイルを制御します。 |
| RootNodeStyle | ルート ノードのテキストのスタイルを制御します。 |
| NodeStyle | CurrentNodeStyle または RootNodeStyle を適用しないと仮定すると、すべてのノードのテキストのスタイルを制御します。 |

NodeStyle プロパティは、CurrentNodeStyle または、RootNodeStyle によってオーバーライドされます。 これらの各プロパティは読み取り専用とを返します、**スタイル**オブジェクト。 これらのプロパティのいずれかを使用してノードの外観に影響を与える、返されるスタイル オブジェクトのプロパティを設定する必要があります。 たとえば、次のコードは、現在のノードの前景色プロパティを変更します。

[!code-aspx[Main](data-bound-controls/samples/sample10.aspx)]

プロパティは、次のようにプログラムでも適用できます。

[!code-csharp[Main](data-bound-controls/samples/sample11.cs)]

> [!NOTE]
> テンプレートが適用されている場合、スタイルは適用されません。


## <a name="lab-1-configuring-an-aspnet-menu-control"></a>演習 1:ASP.NET の Menu コントロールを構成します。

1. 新しい Web サイトを作成します。
2. ファイル、新規作成、ファイルを選択すると、ファイルのテンプレートの一覧からサイト マップを選択して、サイト マップ ファイルを追加します。
3. サイト マップ (既定で Web.sitemap) を開き、次の一覧を次のように変更します。 サイト マップ ファイルのように、リンクしているページは実際に存在しないが、この演習では、問題をされません。

    [!code-xml[Main](data-bound-controls/samples/sample12.xml)]
4. デザイン ビューで、既定の Web フォームを開きます。
5. ツールボックスの [ナビゲーション] セクションから新しい Menu コントロールをページに追加します。
6. ツールボックスの [データ] セクションから新しい SiteMapDataSource を追加します。 SiteMapDataSource は、サイトの Web.sitemap ファイルを自動的に使用されます。 (Web.sitemap ファイル*する必要があります*サイトのルート フォルダーにあります)。
7. メニュー コントロールをクリックし、[Menu タスク] ダイアログを表示するスマート タグのボタンをクリックします。
8. データ ソースの選択ドロップダウン リストでは、SiteMapDataSource1 を選択します。
9. オート フォーマット をクリックし、メニューの形式を選択します。
10. プロパティ ウィンドウで、設定、 **StaticDisplayLevels**プロパティを 2。 メニュー コントロールでは、デザイナーでホーム、製品、およびサービスのノードを表示する必要があります。
11. メニューを使用するブラウザーでページを参照します。 (しているが、サイト マップに追加されたページが実際に存在しない、ために、エラーが表示しようとしてを参照するときに。)

StaticDisplayLevels と MaximumDynamicDisplayLevels プロパティを変更してみるし、メニューを表示する方法に影響する方法を参照してください。

## <a name="lab-2-dynamically-binding-a-treeview-control"></a>演習 2:TreeView コントロールを動的にバインド

この演習では、ローカルで実行される SQL Server があるし、Northwind データベースが SQL Server インスタンス上に存在することを想定します。 これらの条件が満たされない場合は、サンプル内の接続文字列を変更してください。 信頼関係接続ではなく SQL Server 認証を指定する必要がありますもことに注意してください。

1. 新しい Web サイトを作成します。
2. Default.aspx のコード ビューに切り替えるし、すべてのコードを以下に示すコードに置き換えます。 

    [!code-aspx[Main](data-bound-controls/samples/sample13.aspx)]
3. Treeview.aspx としてページを保存します。
4. ページを参照します。
5. ページが最初に表示される場合、ブラウザーでページのソースを表示します。 表示されているノードだけがクライアントに送信されたことに注意してください。
6. 任意のノードの横にあるプラス記号をクリックします。
7. 次回からこのページで ソースの表示。 新しく表示されているノードがあるようになりましたことに注意してください。

## <a name="lab-3-details-view-and-editing-data-using-a-gridview-and-detailsview"></a>演習 3:詳細ビューと GridView と DetailsView を使用してデータの編集

1. 新しい Web サイトを作成します。
2. Web サイトに新しい web.config を追加します。
3. 次に示すように、web.config ファイルには、接続文字列を追加します。 

    [!code-xml[Main](data-bound-controls/samples/sample14.xml)]

    > [!NOTE]
    > 環境内に基づく接続文字列を変更する必要があります。
4. web.config ファイルを保存して閉じます。
5. Default.aspx を開き、新しい SqlDataSource コントロールを追加します。
6. SqlDataSource コントロールの ID を変更**製品**します。
7. **SqlDataSource タスク** メニューのをクリックして**データ ソースの構成**します。
8. 選択**Northwind**接続のドロップダウン リストで [次へ] をクリックします。
9. 選択**製品**から、**名前**ドロップダウン リストを確認し、 **ProductID**、 **ProductName**、 **UnitPrice**、および**UnitsInStock**次に示すようにチェック ボックス。 

![](data-bound-controls/_static/image3.jpg)

    **Figure 3**
10. **[次へ]** をクリックします。
11. **[完了]** をクリックします。
12. ソース ビューに切り替え、生成されたコードを調べます。 通知、 **SelectCommand**、 **DeleteCommand**、 **InsertCommand**、および**UpdateCommand** SqlDataSource に追加されました。コントロール。 また、追加されたパラメーターも注目してください。
13. デザイン ビューに切り替えるし、ページに新しい GridView コントロールを追加します。
14. 選択**製品**から、**データ ソースの選択**ドロップダウンします。
15. 確認**ページングを有効にする**と**選択を有効にする**次のようです。 

![](data-bound-controls/_static/image4.jpg)

    **Figure 4**
16. をクリックして、**列の編集**リンクを確認して**自動生成フィールド**がチェックされます。
17. **[OK]** をクリックします。
18. GridView コントロールを選択して、ボタンをクリックして、次に、 **DataKeyNames**プロパティ ペインでプロパティ。
19. 選択**ProductID**から、**使用可能なデータ フィールド**を一覧表示し、クリックして、 **&gt;**  ボタンを押す。
20. [OK] をクリックします。
21. 新しい SqlDataSource コントロールをページに追加します。
22. SqlDataSource コントロールの ID を変更**詳細**します。
23. SqlDataSource タスク メニューから選択**データ ソースの構成**します。
24. 選択**Northwind**ドロップダウンとクリックから**次**します。
25. 選択<strong>製品</strong>から、<strong>名前</strong>ドロップダウンを確認し、 <strong> \</strong > * でチェック ボックスをオン、<strong>列</strong>listbox です。
26. をクリックして、**場所**ボタンをクリックします。
27. 選択**ProductID**から、**列**ドロップダウンします。
28. 選択**=** 演算子のドロップダウン リストにします。
29. 選択**コントロール**から、**ソース**ドロップダウンします。
30. 選択**GridView1**から、**コントロール ID**ドロップダウンします。
31. をクリックして、**追加**WHERE 句を追加するボタンをクリックします。
32. **[OK]** をクリックします。
33. をクリックして、 **[詳細設定]** ボタンをクリックし、確認、**生成を挿入、更新、および DELETE ステートメント**チェック ボックスをオンします。
34. **[OK]** をクリックします。
35. をクリックして**次** をクリック**完了**。
36. DetailsView コントロールをページに追加します。
37. **データ ソースの選択**ドロップダウンで選択**詳細**します。
38. チェック、**編集を有効にする**次に示すようにチェック ボックスをオンします。 

![](data-bound-controls/_static/image1.gif)

    **Figure 5**
39. ページを保存し、Default.aspx を参照します。
40. をクリックして、**選択**DetailsView 更新を自動的に表示する別のレコードの横にあるリンクです。
41. をクリックして、**編集**DetailsView コントロールでリンクします。
42. レコードに変更を加えるし、クリックして**Update**します。
